---
alwaysApply: true
---

# design.mdc

# fino_core – Project Design Rules

## 1. Project Identity

fino_core is a **core financial data engine library**.

It is NOT:

- an application
- a CLI tool
- a Lambda handler
- a workflow runner

fino_core exists only to:

- fetch financial data
- validate and structure it
- persist it deterministically
- be reused by external interfaces

---

## 2. Architectural Layers (Mandatory)

The project is structured into four conceptual layers:

Public API → Application → Domain
↘ Infrastructure

### Layer Constraints

- Public API is the ONLY external entry point
- Application orchestrates workflows
- Domain contains pure business logic
- Infrastructure handles side effects

Violations are considered design errors. so please suggeste solutions when you face those problems

---

## 3. Directory Structure (Enforced)

```text
src/fino_core/
    ├── api/
    ├── domain/
    ├── application/
    ├── infrastructure/
    ├── util/
    └── config/

```

4. Dependency Rules

Allowed Dependencies

- Public API → Application
- Application → Domain, Ports
- Infrastructure → Domain
- Domain → Python standard library only

Forbidden Dependencies

- Domain → Infrastructure
- Application → Concrete Infrastructure
- Infrastructure → Application logic
- External users → Internal modules

5. Error Handling Rules

- Network errors must be retried
- Provider rate limits must be respected
- Fatal parsing errors must surface clearly
- Silent failures are forbidden

6. Public API Rules

- Public API must be function-based
- Must not expose internal classes
- Must assemble dependencies explicitly
- Must be stable and minimal
- defined inside the src/fino_core/api but export as project root IF like under example

Example:

```
from fino_core import collect_edinet

```
